(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{489:function(e,t,l){"use strict";l.r(t);l(42);var o=l(88),r=l.n(o),n={name:"WebSSH",data:function(){return{rdrawer:!1,hostTableData:[],hostCount:1e3,pathLike:"",pageSize:20,pageCur:1,selRow:{}}},methods:{onSearch:function(){var e=this;r.a.get("/api/cmd/search",{params:{path:"%".concat(this.pathLike,"%"),offset:(this.pageCur-1)*this.pageSize,limit:this.pageSize}}).then((function(t){if(200!=t.status||0!=t.data.code)throw"Error: Query Data";e.hostTableData=t.data.data,e.hostCount=t.data.count})).catch(console.log)},onSave:function(e){var t=this;switch(e){case"del":r.a.get("/api/cmd/del",{params:{id:this.selRow.id}}).then((function(e){if(200!=e.status||0!=e.data.code)throw"Error: Query Data";t.onSearch()})).catch(console.log);break;case"new":r.a.get("/api/cmd/save",{params:{path:this.selRow.path,name:this.selRow.name,serial:this.selRow.serial,cmd:this.selRow.cmd,rule:JSON.stringify(JSON.parse(this.selRow.rule))}}).then((function(e){if(200!=e.status||0!=e.data.code)throw"Error: Query Data";t.onSearch()})).catch(console.log);break;case"set":r.a.get("/api/cmd/save",{params:{id:this.selRow.id,path:this.selRow.path,name:this.selRow.name,serial:this.selRow.serial,cmd:this.selRow.cmd,rule:JSON.stringify(JSON.parse(this.selRow.rule))}}).then((function(e){if(200!=e.status||0!=e.data.code)throw"Error: Query Data";t.onSearch()})).catch(console.log)}},formatDate:function(e,col,t,l){return new Date(t).toUTCString()},newWindow:function(e){window.open("/term/?path=".concat(e.path),"_blank")},openRightDrawer:function(e){this.selRow=e,this.rdrawer=!0},handleSizeChange:function(e){this.pageSize=e},handleCurrentChange:function(e){this.pageCur=e}},mounted:function(){this.onSearch()}},c=l(54),component=Object(c.a)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("el-menu",{staticClass:"el-menu-demo",attrs:{mode:"horizontal"}},[t("el-menu-item",{attrs:{index:"1"}},[t("a",{attrs:{href:"/",target:"_blank"}},[e._v("Hosts")])]),e._v(" "),t("el-menu-item",{attrs:{index:"2"}},[t("a",{attrs:{href:"/cmd",target:"_blank"}},[e._v("Commands")])]),e._v(" "),t("el-menu-item",{attrs:{index:"3"},on:{click:function(t){return e.openRightDrawer({})}}},[e._v("New")])],1),e._v(" "),t("el-drawer",{attrs:{title:"编辑命令",visible:e.rdrawer,direction:e.rtl},on:{"update:visible":function(t){e.rdrawer=t}}},[t("el-form",{ref:"form",attrs:{model:e.selRow,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"Id"}},[t("el-input",{model:{value:e.selRow.id,callback:function(t){e.$set(e.selRow,"id",t)},expression:"selRow.id"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"Name"}},[t("el-input",{model:{value:e.selRow.name,callback:function(t){e.$set(e.selRow,"name",t)},expression:"selRow.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"Path"}},[t("el-input",{model:{value:e.selRow.path,callback:function(t){e.$set(e.selRow,"path",t)},expression:"selRow.path"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"Cmd"}},[t("el-input",{attrs:{type:"textarea",autosize:""},model:{value:e.selRow.cmd,callback:function(t){e.$set(e.selRow,"cmd",t)},expression:"selRow.cmd"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"Rule"}},[t("el-input",{attrs:{type:"textarea",autosize:""},model:{value:e.selRow.rule,callback:function(t){e.$set(e.selRow,"rule",t)},expression:"selRow.rule"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"Serial"}},[t("el-input",{model:{value:e.selRow.serial,callback:function(t){e.$set(e.selRow,"serial",t)},expression:"selRow.serial"}})],1)],1),e._v(" "),t("el-button-group",{staticStyle:{float:"right"}},[t("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(t){return e.onSave("new")}}},[e._v("New")]),e._v(" "),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.onSave("set")}}},[e._v("Set")]),e._v(" "),t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.onSave("del")}}},[e._v("Del")])],1)],1),e._v(" "),t("el-row",[t("el-col",[t("el-input",{attrs:{placeholder:"Search Path","prefix-icon":"el-icon-search"},on:{change:e.onSearch},model:{value:e.pathLike,callback:function(t){e.pathLike=t},expression:"pathLike"}})],1)],1),e._v(" "),t("el-row",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.hostTableData,border:""}},[t("el-table-column",{attrs:{fixed:"",prop:"id",label:"ID"}}),e._v(" "),t("el-table-column",{attrs:{fixed:"",prop:"path",label:"Path"}}),e._v(" "),t("el-table-column",{attrs:{prop:"name",label:"Name"}}),e._v(" "),t("el-table-column",{attrs:{prop:"serial",label:"Serial"}}),e._v(" "),t("el-table-column",{attrs:{prop:"cmd",label:"Cmd"}}),e._v(" "),t("el-table-column",{attrs:{prop:"rule",label:"Rule","show-overflow-tooltip":""}}),e._v(" "),t("el-table-column",{attrs:{prop:"create_at",label:"CreateAt",formatter:e.formatDate,"show-overflow-tooltip":""}}),e._v(" "),t("el-table-column",{attrs:{fixed:"right",label:"Opt"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.openRightDrawer(l.row)}}},[e._v("Edit/New/Del")])]}}])})],1),e._v(" "),t("div",{staticClass:"block"},[t("el-pagination",{attrs:{"current-page":e.pageCur,"page-sizes":[20,50,100,200],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.hostCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)}),[],!1,null,"4a9b41ab",null);t.default=component.exports}}]);